#include<stdio.h>
#include<string.h>
#include<stdlib.h>

void output_matrix_hor(int n,int m, char a[][m]);
void output_matrix_ver(int n,int m, char a[][m]);


const int n;
const int m;
int b[6][7];


void output_matrix_hor(int n,int m,char a[][m]){
    printf("###Across###\n");
    for(int i = 0;i<n;i++){
        if(a[i][0] !='*' && i !=0){
            printf("\n");
        }
        int f = 0;
        for(int j = 0;j<m;j++){
            if(a[i][j] != '*'){
                if(f==0){
                    printf("%d.",b[i][j]);
                }
                f++;
                printf("%c",a[i][j]);
            }
            else{
                f=0;
                if(j!=m-1){
                printf("\n");
                }
            }
        }
    }
    
    printf("\n");
}


void output_matrix_ver(int n,int m,char a[][m]){
    printf("###Down###\n");
    for(int i = 0;i<n;i++){
        for(int j = 0;j<m;j++){
            int u=1;
            int v=1;
            int g=0;
            for(int k = i;k<n;k++){
                if (a[k][j] != '0'){
                    if(a[k][j] != '*'){
                        if(g == 0){
                            printf("%d.",b[k][j]);
                        }
                        g++;
                        printf("%c",a[k][j]);
                        a[k][j] = '0';
                    }
                    else{
                        v=0;
                        break;
                    }
                    }
                else{
                    u=0;
                }
            }
            if(u==1 && v==1)printf("\n");
            if(u==1 && v ==0&&g!=0)printf("\n");
            }
        }
}


int main(){
    int n,m;
    int g = 1;
    printf("Enter the size of row you want: ");
    scanf("%d",&n);
    printf("Enter the size of column you want: ");
    scanf("%d",&m);
    char a[n][m];
    for(int i = 0;i<n;i++){
        printf("please enter %d row elements: ",i+1);
        for(int j = 0;j<m;j++){
            scanf("%s",&a[i][j]);
        }
    }
    // this for loop is for storing the index of the elements, which we use while printing
    for(int i = 0;i<n;i++){
        for(int j = 0;j<m;j++){
            if ((i == 0 && a[i][j] !='*') || (j ==0 && a[i][j] != '*')){
                b[i][j] = g++;
            }
            else if ((a[i-1][j] == '*' || a[i][j-1] == '*')&& a[i][j] != '*') {
                    b[i][j] = g++;
                }
            else{
                b[i][j] = 0;
            }
        }
    }
    //function to print across words
    output_matrix_hor(n,m,a);
    // function to print down words
    output_matrix_ver(n,m,a);
}



